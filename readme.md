# Бэкенд сайта Cipo [https://cipo.kz] и телеграм-бота
Хранение новостей, каталога товаров, изображений - предоставление информации через RestAPI

## Модули:
### 1. Парсинг
Загружает XML-файлы и файлы картинок из выгрузки 1С-Розница, запись в БД с хранением истории. Так как под JS я не нашел вменяемого готового парсера, пришлось все писать самому.

Состав данных - описание товара (реквизиты, картинки), текущие складские остатки, цены. 

Используемый стек: JavaScript, node.js, xml-js, ORM Prisma, Postresql
 
### 2. Сервер
Предоставляет данные по HTTP-запросам для сайта или бота. 

Используемый стек: JavaScript, node.js, express (и к нему cors, express-rate-limit, helmet), ORM Prisma
SSL: выпущены и используются сертификаты под ip-адрес сервера

Есть Swagger-страница, но она не всегда актуальна, так как ее нужно править ручками - схема Prisma не конвертируется в схему Swagger.  

Есть JS doc на большинство функций

### 3. Статичные данные
Их немного, отдает Express

     
## Планы:
 - чистка устаревших данных из БД и логов
 - переписать на TypeScript
 - добавить валидацию входящих данных через специальные библиотеки (типа AJV), сейчас это делается простыми условиями
 - не все функции покрыты описаниями JS doc
 - попробовать автоматизировать схемы Swagger
 - прикрутить Github Actions для деплоя схемы Prisma и перезапуска PM2